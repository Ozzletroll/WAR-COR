{# Component Macro imports #}
{% import "components/page_upper_area.html" as page_upper_area %}
{% import "components/back_button.html" as back_button %}
{% import "components/campaign_entry.html" as campaign_entry %}

{% extends "base/base.html" %}

{% block content %}

<div class="scrollpage">

  <div class="campaigns-content">
    
    {# Create navigation url bar #}

    {% set urls = [""] %}

    {{ page_upper_area.page_upper_area(navigation_urls=urls, 
                             is_link=false, 
                             searchbar=true,
                             current_user=current_user) }}

    <div class="campaigns-title">

      {# Blank back button area area. No url needed. #}
      {% set url = "" %}
      {{ back_button.back_button(url=url, blank=true) }}

      <h3 class="campaigns-heading">Campaigns</h3>

      {% include "components/view_toggles.html" %}

    </div>

    <hr class="campaigns-divider">
    <p class="flavour-text">UWC-7-01 // Personnel::Service Record </p>

    <div class="form-flash">
      {% include 'base/flash.html' %}
    </div>

    <div id="campaigns-list" class="campaigns-list">

      {% for campaign in campaigns %}
        {{ campaign_entry.campaign_entry(campaign=campaign, current_user=current_user) }}
      {% endfor %}

      {# New user introduction, if user.campaigns is empty #}
      {% if not campaigns %}
        {{ campaign_entry.new_user_entry(campaign=campaign, current_user=current_user) }}
      {% endif %}

    </div>

    <!-- New Campaign Button -->
    <a href="{{ url_for('campaign.create_campaign')}}" class="campaign-entry new-campaign-area">
      <span class="new-campaign-span">
      <h2 class="campaign-entry-title new-campaign-heading">New Campaign</h2>
      </span>
    </a>

  </div>
</div>

<!-- Javascript -->
<script src="/static/js/campaigns.js"></script>
<script src="/static/js/campaigns_layout.js"></script>
<script src="/static/js/campaign_search.js"></script> 

<!-- Scroll to target element if scroll_target is set -->
{% if scroll_target %}
<script>
  window.addEventListener('load', function() {
    document.getElementById('{{ scroll_target }}').scrollIntoView();
  });
</script>

{% endif %}

{% endblock %}
