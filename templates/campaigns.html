{# Component Macro imports #}
{% import "components/page_upper_area.html" as page_upper_area %}
{% import "components/back_button.html" as back_button %}
{% import "components/campaign_entry.html" as campaign_entry %}

{% extends "base/base.html" %}

{% block content %}

{% include "components/searchbar.html" %}

<div class="scrollpage">

  <div class="campaigns-content">

    {# Animation fade in group 1 #}
    <div class="fade-in-block-1">
    
      {# Create navigation url bar #}

      {% set urls = [""] %}

      {{ page_upper_area.page_upper_area(navigation_urls=urls, 
                              is_link=false,
                              current_user=current_user) }}

      <div class="campaigns-title">

        {# Blank back button area area. No url needed. #}
        {% set url = "" %}
        {{ back_button.back_button(url=url, blank=true) }}

        <h3 class="campaigns-heading">Campaigns</h3>

      </div>

      <hr class="campaigns-divider">
      <p class="flavour-text">UWC-7-01 // Personnel::Service Record </p>

    </div>


    <div class="campaigns-upper-bar fade-in-block-2">
      <div class="bar-items-left">
        <a href="{{ url_for('campaign.create_campaign')}}">
          <button class="create-campaign-button">
            + NEW CAMPAIGN
          </button>
        </a>

        <a href="{{ url_for('membership.join_campaign')}}">
          <button class="create-campaign-button">
            + JOIN CAMPAIGN
          </button>
        </a>
      </div>

      {% include "components/view_toggles.html" %}
    </div>

    <div class="form-flash">
      {% include 'components/flash.html' %}
    </div>

    {# Animation fade in group 2 #}
    <div id="campaigns-list" class="campaigns-list fade-in-block-2">

      {% for campaign in campaigns %}
        {{ campaign_entry.campaign_entry(campaign=campaign, current_user=current_user) }}
      {% endfor %}

      {# New user introduction, if user.campaigns is empty #}
      {% if not campaigns %}
        {{ campaign_entry.new_user_entry(campaign=campaign, current_user=current_user) }}
      {% endif %}

    </div>

  </div>
</div>

<!-- Javascript -->
<script src="/static/js/campaigns.js"></script>
<script src="/static/js/campaigns_layout.js"></script>
<script src="/static/js/campaign_search.js"></script> 
<script src="/static/js/scroll_target.js"></script> 
<script>
  window.addEventListener('load', scrollToTarget('{{ url_for("home.campaign_target") }}', '{{ csrf_token() }}'));
</script>

{% endblock %}
