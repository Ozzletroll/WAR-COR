{% extends "base/base.html" %}

{% block content %}

<div class="scrollpage">

  <div class="campaigns-content">
    <div class="campaigns-title">
      <h3 class="campaigns-heading">Campaigns</h1>
    </div>

    <hr class="campaigns-divider">

    <ul class="campaigns-list">

      {% for campaign in current_user.campaigns %}
        <section class="campaign-entry">

          <h2 class="campaign-entry-title">{{ campaign.title }}</h2>

          <div class="campaign-entry-container">
            <div class="campaign-overview">
              <h4 class="campaign-entry-title">Overview:</h4>
              <p>{{ campaign.description }}</p>
            </div>
            <div class="campaign-members">
              <h4 class="campaign-entry-title">Members:</h2>
              <ul class="campaign-members-list">
                {% for user in campaign.members %}
                  <li>
                    {{user.username.upper()}}:
                    {% for entry in user.campaign_associations %}
                      {%if entry.campaign_id == campaign.id%}
                        [{{entry.callsign.upper()}}]
                      {%endif%}
                    {% endfor %}
                    {% if campaign in user.permissions %}
                    [ADMIN]
                    {% endif %}
                  </li> 
                {% endfor %} 
              </ul>
            </div> 
          </div>

          <div class="campaign-entry-buttons">
            <a href="{{ url_for('campaign.show_timeline', campaign_name=campaign.title, campaign_id=campaign.id)}}"><button class="entry-button">VIEW</button></a>
            <a href="{{ url_for('campaign.edit_campaign', campaign_name=campaign.title, campaign_id=campaign.id)}}"><button class="entry-button">EDIT</button></a>
          </div>
          
        </section>
      {% endfor %}

    </ul>

  </div>
</div>

{% endblock %}