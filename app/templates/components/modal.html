

{% macro modal(type=none,
               subtype=none,
               title=none, 
               aria_label=none, 
               flavour_text=none, 
               body_text=none, 
               button_text=none, 
               model_id=none, 
               form=none, 
               form_action=none,
               form_target=none, 
               loop_index=none) %}
  
  <div id="{{ type }}-modal-{{ loop_index }}" class="modal">
    {% if type == "preview" %}
    <div class="modal-content modal-preview-content" role="dialog" aria-label="{{ aria_label }}" aria-modal="false" tabindex="-1">
    {% else %}
    <div class="modal-content modal-content-small" role="dialog" aria-label="{{ aria_label }}" aria-modal="false" tabindex="-1">
    {% endif %}
      <div class="modal-content-inner">
        <div class="modal-header">
          <h2 class="modal-header-small">{{ title }}</h2>
          <button id="{{ type }}-close-{{ loop_index }}" class="modal-close" aria-label="Close Modal">
            <img class="icon" aria-label="Close Icon" src="{{ url_for('static', filename='images/icons/cancel.svg') }}">
          </button>
        </div>
        {% if type == "preview" %}
        <div class="modal-body modal-preview-overflow">
        {% elif type == "help" %}
        <div class="modal-body modal-body-scroll">
        {% else %}
        <div class="modal-body modal-body-small">
        {% endif %}

          {% if type == "preview" %}

            <div class="event-page-elem event-elem-large elem-body event-page-description">
              <div class="entry-left-padding"></div>
              <div class="description-body">
                  <h4 class="event-desc-header">Archive Entry:</h4>
                  <div class="event-desc">
                    <div id="preview-modal-body-{{loop_index}}" class="modal-body modal-body-preview">
                      {# Modal text goes here #}
                    </div>
                  </div>
              </div>
            </div>

          {% elif type == "comment" %}

            <p class="flavour-text modal-flavour" aria-label="Flavour Text">MSG-{{model_id}}-{{loop_index}} // DELETION::CONFIRM</p>
            <p class="modal-text modal-text-upper">{{ body_text }}</p>
            <form method="POST" action="{{ form_action }}" aria-label="Confirmation Form">
              {{ form.csrf_token }}
              {{ form.submit(class_="button modal-confirm-button", value=button_text) }}
            </form>

          {% elif type == "admin" %}

            <p class="flavour-text modal-flavour" aria-label="Flavour Text">CMB-{{model_id}}-{{loop_index}} // AUTHORISATION::GRANT</p>
            <p class="modal-text modal-text-upper">
              Confirm WARCOR admin authorisation for user <strong>{{ form_target.username }}</strong> 
              in campaign <strong>{{ body_text }}</strong>.
            </p>
            <form id="make-admin-form" class="add-member-form" aria-label="Confirmation Form"
            method="POST" action="{{ form_action }}">
              {{ form.csrf_token }}
              {{ form.username(value=form_target.username, class_="form-hidden") }}
              {{ form.user_id(value=form_target.id, class_="form-hidden") }}
              {{ form.submit_button(value="MAKE ADMIN", class_="button modal-confirm-button") }}
            </form>

          {% elif type == "remove" %}

            <p class="flavour-text modal-flavour" aria-label="Flavour Text">CMB-{{model_id}}-{{loop_index}} // AUTHORISATION::REVOKE</p>
            <p class="modal-text modal-text-upper">
              Confirm removal of <strong>{{ form_target.username }}</strong> from campaign <strong>{{ body_text }}</strong>. 
              Any admin privileges will be revoked.
            </p>
            <form id="remove-user-form" class="add-member-form" aria-label="Confirmation Form" 
            method="POST" action="{{ form_action }}">
              {{ form.csrf_token }}
              {{ form.username(value=form_target.username, class_="form-hidden") }}
              {{ form.user_id(value=form_target.id, class_="form-hidden") }}
              {{ form.submit_button(value=button_text, class_="button modal-confirm-button") }}
            </form>

          {% elif type == "event" %}

            <p class="flavour-text modal-flavour">CMB-3-{{model_id}} // DELETION::CONFIRM</p>
            <p class="modal-text modal-text-upper">Confirm termination of event <strong>{{body_text}}</strong>.</p>
            <form method="POST" action="{{ form_action }}">
              {{ form.csrf_token }}
              {{ form.submit(class_="button modal-confirm-button", value="DELETE") }}
            </form>

          {% elif type == "epoch" %}

            <p class="flavour-text modal-flavour">EPC-5-{{model_id}} // DELETION::CONFIRM</p>
            <p class="modal-text modal-text-upper">Confirm termination of epoch <strong>{{body_text}}</strong>. 
              This will not delete any events contained within the epoch.</p>
            <form method="POST" action="{{ form_action }}">
              {{ form.csrf_token }}
              {{ form.submit(class_="button modal-confirm-button", value="DELETE") }}
            </form>

          {% elif type == "help" %}

            {% if subtype == "date" %}

              <p class="modal-text modal-text-left">WAR/COR organises all events in chronological order. Dates should be entered in a 
                "YEAR/MONTH/DAY HOUR:MINUTE:SECONDS" format.</p>
              <p class="modal-text modal-text-left">WAR/COR does not enforce standard year/month/day/hour/second lengths, which may be any value between 1 and 99.</p>
              <p class="modal-text modal-text-left">The year value can be any value of 1-9 digits, either positive or negative. This allows the placement of events in a similar manner to the BC/BCE system,
                using your campaign's chosen suffix/negative suffix.</p>
              <p class="modal-highlight-text">Example: "5016/15/40 25:00:00" is a valid date.</p>

            {% elif subtype == "belligerents" %}

              <p class="modal-text modal-text-left">An event's belligerents list represents active combatants and participants.</p>
              <p class="modal-text modal-text-left">Allied belligerents should be ampersand "&" separated, whilst opposing forces should be comma "," separated.</p>
              <p class="modal-highlight-text">Example: "Ally Faction 1 & Ally Faction 2, Enemy Faction"</p>

            {% elif subtype == "format" %}

              <p class="modal-text modal-text-left">An event with the "Hide Time" tag will not render the time label on the timeline. This can be useful to represent events
                that take up the entire day, or do not require a specific time label.
              </p>

            {% elif subtype == "epoch_start_date" %}

              <p class="modal-text modal-text-left">An epoch represents an era or a time period during a campaign, grouping together
                any events that occur within the epoch start and end dates.
                Epochs are placed at the day level within the timeline, and encapsulate 
                all the events that take place within.
              </p>
              <p class="modal-text modal-text-left">The epoch markers are placed at the beginning of the START DATE day,
                and the end of the END DATE day.</p>

            {% elif subtype == "epoch_end_date" %}

              <p class="modal-text modal-text-left">The END DATE of the epoch specifies the position of the end of epoch marker.</p>
              <p class="modal-text modal-text-left">Events that occur within the END DATE day are considered part of the epoch.</p>
            
            {% elif subtype == "epoch_overview" %}

              <p class="modal-text modal-text-left">The epoch overview is displayed on the main timeline beneath each epoch marker.
                It is best used for a brief description of the epoch.</p>

            {% elif subtype == "epoch_description" %}

              <p class="modal-text modal-text-left">The epoch description is displayed on the dedicated epoch page itself, allowing
                for a longer, more detailed description of the epoch.
              </p>

            {% elif subtype == "image" %}

              <p class="modal-text modal-text-left">The banner image should be a URL to a .jpg, .jpeg, .png, .gif or 
                .webp image file. The banner image will be cropped if it exceeds 400px in height, and works best with a 
                wide, panoramic image.
              </p>

            {% elif subtype == "event_form" %}
              <p class="modal-text modal-text-left">Create new dynamic fields by using the buttons at the end
                of the form.
              </p>
              <p class="modal-text modal-text-left">A <strong>basic field</strong> allows simple text input. The width of the field
                can be toggled via the
                <span class="nowrap">
                  <svg class="icon icon-inline icon-colour-var" viewBox="0 0 512 512" aria-label="Expand Icon"
                  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g stroke="none" stroke-width="1" fill-rule="evenodd">
                        <g id="Combined-Shape" transform="translate(64.000000, 64.000000)">
                            <path d="M384,8.15703061e-12 L384,149.333333 L341.333333,149.333333 L341.333,73.103 L238.805354,175.374396 L208.63547,145.204512 L311.431,42.666 L234.666667,42.6666667 L234.666667,1.09174891e-11 L384,8.15703061e-12 Z M145.515738,209.223881 L175.685627,239.393771 L73.002,341.333 L149.333333,341.333333 L149.333333,384 L6.38067377e-12,384 L1.42108547e-14,234.666667 L42.6666667,234.666667 L42.666,311.328 L145.515738,209.223881 Z"></path>
                        </g>
                    </g>
                  </svg>
                </span> icon.
              </p>
              <p class="modal-text modal-text-left">A <strong>text field</strong> uses a full WYSIWYG editor, allowing advanced styling,
                as well as embedded links and images.</p>
              <p class="modal-text modal-text-left">A <strong>composite field</strong> allows the creation of grouped columns of
                data, for example, a list of belligerents, or casualties and losses. Each group can be renamed and reordered freely, and populated with any number of cells.
              </p>
              <p class="modal-text modal-text-left">Dynamic fields can be reordered on the page by dragging the 
                <span class="nowrap">
                <svg class="icon icon-inline icon-colour-var" viewBox="0 0 512 512" aria-label="Drag Icon"
                    version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                      <g stroke="none" stroke-width="1" fill-rule="evenodd">
                        <g transform="translate(42.666667, 42.666667)">
                            <path d="M234.666667,256 L234.666667,341.333333 L277.333333,341.333333 L213.333333,426.666667 L149.333333,341.333333 L192,341.333333 L192,256 L234.666667,256 Z M341.333333,149.333333 L426.666667,213.333333 L341.333333,277.333333 L341.333333,234.666667 L256,234.666667 L256,192 L341.333333,192 L341.333333,149.333333 Z M85.3333333,149.333333 L85.3333333,192 L170.666667,192 L170.666667,234.666667 L85.3333333,234.666667 L85.3333333,277.333333 L3.55271368e-14,213.333333 L85.3333333,149.333333 Z M213.333333,3.55271368e-14 L277.333333,85.3333333 L234.666667,85.3333333 L234.666667,170.666667 L192,170.666667 L192,85.3333333 L149.333333,85.3333333 L213.333333,3.55271368e-14 Z" id="Combined-Shape"></path>
                          </g>
                        </g>
                    </svg>
                  </span> icon, and can be removed by clicking the
                <span class="nowrap">
                  <svg class="icon icon-inline icon-colour-var" aria-label="Close Icon"
                  viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g stroke="none" stroke-width="1" fill-rule="evenodd">
                      <g transform="translate(91.520000, 91.520000)">
                        <polygon points="328.96 30.2933333 298.666667 1.42108547e-14 164.48 134.4 30.2933333 1.42108547e-14 1.42108547e-14 30.2933333 134.4 164.48 1.42108547e-14 298.666667 30.2933333 328.96 164.48 194.56 298.666667 328.96 328.96 298.666667 194.56 164.48"></polygon>
                      </g>
                    </g>
                  </svg>
                </span>
                 icon.
              </p>
            {% endif %}

          {% endif %}
        
        </div>
      </div>
    </div>
  </div>

{%- endmacro %}
