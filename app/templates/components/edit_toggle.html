{# 
  
  EDIT PAGE TOGGLE COMPONENT
  
  Found on the timeline page and timeline edit page, and toggles between them.
  Edit boolean is used to determine icon to be displayed.
  
#}

{% macro edit_toggle(campaign, edit=false) %}

<div class="edit-toggle-border">
  <div class="edit-toggle-outer">

    {% if edit %}
      <button class="button edit-toggle-button" onclick="setScrollTarget(toggleTargetURL, csrfTokenForToggle, timelineURL)">
    {% else %}
      <button class="button edit-toggle-button" onclick="setScrollTarget(toggleTargetURL, csrfTokenForToggle, editTimelineURL)">
    {% endif %}
        <label class="edit-toggle-label" title="VIEW/EDIT TOGGLE">
          {% if edit %}
            <svg width="20px" height="20px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g class="icon-colour-var" transform="translate(42.666667, 85.333333)">
                      <path d="M213.333333,1.42108547e-14 C64,1.42108547e-14 7.10542736e-15,170.666667 7.10542736e-15,170.666667 C7.10542736e-15,170.666667 64,341.333333 213.333333,341.333333 C362.666667,341.333333 426.666667,170.666667 426.666667,170.666667 C426.666667,170.666667 362.666667,1.42108547e-14 213.333333,1.42108547e-14 Z M213.333333,298.666667 C119.071573,298.666667 64.7370667,207.3632 46.7136,170.67328 C64.7850667,133.88928 119.114667,42.6666667 213.333333,42.6666667 C307.595093,42.6666667 361.9296,133.970133 379.954347,170.658773 C361.8816,207.444053 307.552,298.666667 213.333333,298.666667 Z M213.333333,96 C172.096427,96 138.666667,129.42976 138.666667,170.666667 C138.666667,211.903573 172.096427,245.333333 213.333333,245.333333 C254.57024,245.333333 288,211.903573 288,170.666667 C288,129.42976 254.57024,96 213.333333,96 Z M213.333333,202.666667 C195.688747,202.666667 181.333333,188.311253 181.333333,170.666667 C181.333333,153.02208 195.688747,138.666667 213.333333,138.666667 C230.97792,138.666667 245.333333,153.02208 245.333333,170.666667 C245.333333,188.311253 230.97792,202.666667 213.333333,202.666667 Z"></path>
                  </g>
              </g>
            </svg>
          {% else %}
            <svg width="20px" height="20px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g class="icon-colour-var" transform="translate(42.666667, 42.666667)">
                      <path d="M426.666667,384 L426.666667,426.666667 L3.55271368e-14,426.666667 L3.55271368e-14,384 L426.666667,384 Z M277.333333,7.10542736e-15 L384,106.666667 L149.333333,341.333333 L42.6666667,341.333333 L42.6666667,234.666667 L277.333333,7.10542736e-15 Z M207.079667,130.583 L85.3333333,252.330667 L85.3333333,298.666667 L131.669333,298.666667 L253.415667,176.919 L207.079667,130.583 Z M277.333333,60.3306667 L237.249667,100.413 L283.585667,146.749 L323.669333,106.666667 L277.333333,60.3306667 Z"></path>
                  </g>
              </g>
            </svg>
          {% endif %}
        </label>
      </button>
    </a>
    
  </div>
</div>

<script src="/static/js/edit_toggle_scroll.js"></script>
<script>
  const toggleTargetURL = "{{ url_for('session.timeline_edit_toggle') }}"   
  const csrfTokenForToggle = "{{ csrf_token() }}"
  const timelineURL = "{{ url_for('campaign.show_timeline', campaign_name=campaign.url_title, campaign_id=campaign.id)}}"
  const editTimelineURL = "{{ url_for('campaign.edit_timeline', campaign_name=campaign.url_title, campaign_id=campaign.id)}}"
</script>

{%- endmacro %}


{% macro event_edit_toggle(campaign, event, edit=false) %}
<div class="edit-toggle-border">
  <div class="edit-toggle-outer">

    {% if edit %}
      <button class="button edit-toggle-button" onclick="eventToggle(eventURL)">
    {% else %}
      <button class="button edit-toggle-button" onclick="eventToggle(eventEditURL)">
    {% endif %}
        <label class="edit-toggle-label" title="VIEW/EDIT TOGGLE">
          {% if edit %}
            <svg width="20px" height="20px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g class="icon-colour-var" transform="translate(42.666667, 85.333333)">
                      <path d="M213.333333,1.42108547e-14 C64,1.42108547e-14 7.10542736e-15,170.666667 7.10542736e-15,170.666667 C7.10542736e-15,170.666667 64,341.333333 213.333333,341.333333 C362.666667,341.333333 426.666667,170.666667 426.666667,170.666667 C426.666667,170.666667 362.666667,1.42108547e-14 213.333333,1.42108547e-14 Z M213.333333,298.666667 C119.071573,298.666667 64.7370667,207.3632 46.7136,170.67328 C64.7850667,133.88928 119.114667,42.6666667 213.333333,42.6666667 C307.595093,42.6666667 361.9296,133.970133 379.954347,170.658773 C361.8816,207.444053 307.552,298.666667 213.333333,298.666667 Z M213.333333,96 C172.096427,96 138.666667,129.42976 138.666667,170.666667 C138.666667,211.903573 172.096427,245.333333 213.333333,245.333333 C254.57024,245.333333 288,211.903573 288,170.666667 C288,129.42976 254.57024,96 213.333333,96 Z M213.333333,202.666667 C195.688747,202.666667 181.333333,188.311253 181.333333,170.666667 C181.333333,153.02208 195.688747,138.666667 213.333333,138.666667 C230.97792,138.666667 245.333333,153.02208 245.333333,170.666667 C245.333333,188.311253 230.97792,202.666667 213.333333,202.666667 Z"></path>
                  </g>
              </g>
            </svg>
          {% else %}
            <svg width="20px" height="20px" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g class="icon-colour-var" transform="translate(42.666667, 42.666667)">
                      <path d="M426.666667,384 L426.666667,426.666667 L3.55271368e-14,426.666667 L3.55271368e-14,384 L426.666667,384 Z M277.333333,7.10542736e-15 L384,106.666667 L149.333333,341.333333 L42.6666667,341.333333 L42.6666667,234.666667 L277.333333,7.10542736e-15 Z M207.079667,130.583 L85.3333333,252.330667 L85.3333333,298.666667 L131.669333,298.666667 L253.415667,176.919 L207.079667,130.583 Z M277.333333,60.3306667 L237.249667,100.413 L283.585667,146.749 L323.669333,106.666667 L277.333333,60.3306667 Z"></path>
                  </g>
              </g>
            </svg>
          {% endif %}
        </label>
      </button>
    
  </div>
</div>

<script>
  function eventToggle(destinationURL) {
    window.location.href = destinationURL
  }
  const eventURL = "{{ url_for('event.view_event', campaign_name=campaign.url_title, campaign_id=campaign.id, event_name=event.url_title, event_id=event.id) }}"   
  const eventEditURL = "{{ url_for('event.edit_event', campaign_name=campaign.url_title, campaign_id=campaign.id, event_name=event.url_title, event_id=event.id) }}"
  const csrfTokenForEventToggle = "{{ csrf_token() }}"
</script>

{%- endmacro %}
